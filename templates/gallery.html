{% extends 'base.html' %}

{% block title %}{{ _('gallery') }} - Shweta Medical Mart{% endblock %}

{% block content %}
<div class="container-fluid py-5">
    <div class="text-center mb-5">
        <h2 class="fw-bold mb-3">{{ _('gallery_title') }}</h2>
        <div class="mx-auto bg-success rounded opacity-25" style="width: 60px; height: 4px;"></div>
    </div>

    <div class="row g-4 justify-content-center">
        <!-- Cafe/Interior Section Carousel -->
        <div class="col-md-4">
            <div class="gallery-card rounded-4 overflow-hidden shadow-lg border-0 h-100 hover-lift">
                <div id="galleryCarouselCafe" class="carousel slide carousel-fade" data-bs-ride="carousel"
                    data-bs-interval="2000" data-bs-pause="hover">
                    <div class="carousel-inner">
                        {% for image in cafe_images %}
                        <div class="carousel-item {{ 'active' if loop.first }}">
                            <!-- Blur Background Container -->
                            <div class="blur-bg-container"
                                data-bg="{{ url_for('static', filename='images/Cafe+Interior/' + image) }}"
                                style="position: relative; height: 300px; width: 100%; overflow: hidden; background: #000;">
                                <!-- Blurred Background -->
                                <div class="blur-bg"
                                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
                                            background-size: cover; background-position: center; filter: blur(20px); opacity: 0.6;">
                                </div>
                                <!-- Main Image -->
                                <img src="{{ url_for('static', filename='images/Cafe+Interior/' + image) }}"
                                    class="d-block w-100 lightbox-trigger"
                                    style="position: relative; height: 100%; object-fit: contain; cursor: pointer; z-index: 1;"
                                    alt="Cafe Image">
                            </div>
                        </div>
                        {% else %}
                        <div class="carousel-item active">
                            <div class="d-flex align-items-center justify-content-center bg-light"
                                style="height: 300px;">
                                <p class="text-muted">No images available</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>

                </div>
                <div class="p-3 text-center bg-white border-top">
                    <a href="{{ url_for('gallery_category', category='cafe') }}" class="text-decoration-none">
                        <h5 class="fw-bold text-success m-0 hover-text-dark">Cafe / Interior</h5>
                    </a>
                </div>
            </div>
        </div>

        <!-- Gift Shop/Article Section Carousel -->
        <div class="col-md-4">
            <div class="gallery-card rounded-4 overflow-hidden shadow-lg border-0 h-100 hover-lift">
                <div id="galleryCarouselGift" class="carousel slide carousel-fade" data-bs-ride="carousel"
                    data-bs-interval="2000" data-bs-pause="hover">
                    <div class="carousel-inner">
                        {% for image in shop_images %}
                        <div class="carousel-item {{ 'active' if loop.first }}">
                            <!-- Blur Background Container -->
                            <div class="blur-bg-container"
                                data-bg="{{ url_for('static', filename='images/Gift_shop+Articles/' + image) }}"
                                style="position: relative; height: 300px; width: 100%; overflow: hidden; background: #000;">
                                <!-- Blurred Background -->
                                <div class="blur-bg"
                                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
                                            background-size: cover; background-position: center; filter: blur(20px); opacity: 0.6;">
                                </div>
                                <!-- Main Image -->
                                <img src="{{ url_for('static', filename='images/Gift_shop+Articles/' + image) }}"
                                    class="d-block w-100 lightbox-trigger"
                                    style="position: relative; height: 100%; object-fit: contain; cursor: pointer; z-index: 1;"
                                    alt="Gift Shop Image">
                            </div>
                        </div>
                        {% else %}
                        <div class="carousel-item active">
                            <div class="d-flex align-items-center justify-content-center bg-light"
                                style="height: 300px;">
                                <p class="text-muted">No images available</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>

                </div>
                <div class="p-3 text-center bg-white border-top">
                    <a href="{{ url_for('gallery_category', category='shop') }}" class="text-decoration-none">
                        <h5 class="fw-bold text-success m-0 hover-text-dark">Gift Shop / Article</h5>
                    </a>
                </div>
            </div>
        </div>

        <!-- Medicine Section Carousel -->
        <div class="col-md-4">
            <div class="gallery-card rounded-4 overflow-hidden shadow-lg border-0 h-100 hover-lift">
                <div id="galleryCarouselMedicine" class="carousel slide carousel-fade" data-bs-ride="carousel"
                    data-bs-interval="2000" data-bs-pause="hover">
                    <div class="carousel-inner">
                        {% for image in medicine_images %}
                        <div class="carousel-item {{ 'active' if loop.first }}">
                            <!-- Blur Background Container -->
                            <div class="blur-bg-container"
                                data-bg="{{ url_for('static', filename='images/Medicine/' + image) }}"
                                style="position: relative; height: 300px; width: 100%; overflow: hidden; background: #000;">
                                <!-- Blurred Background -->
                                <div class="blur-bg"
                                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
                                            background-size: cover; background-position: center; filter: blur(20px); opacity: 0.6;">
                                </div>
                                <!-- Main Image -->
                                <img src="{{ url_for('static', filename='images/Medicine/' + image) }}"
                                    class="d-block w-100 lightbox-trigger"
                                    style="position: relative; height: 100%; object-fit: contain; cursor: pointer; z-index: 1;"
                                    alt="Medicine Image">
                            </div>
                        </div>
                        {% else %}
                        <div class="carousel-item active">
                            <div class="d-flex align-items-center justify-content-center bg-light"
                                style="height: 300px;">
                                <p class="text-muted">No images available</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>

                </div>
                <div class="p-3 text-center bg-white border-top">
                    <a href="{{ url_for('gallery_category', category='medicine') }}" class="text-decoration-none">
                        <h5 class="fw-bold text-success m-0 hover-text-dark">Medicine</h5>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var carousels = document.querySelectorAll('.carousel');
        carousels.forEach(function (carousel) {
            new bootstrap.Carousel(carousel, {
                interval: 2000,
                ride: 'carousel',
                pause: 'hover',
                wrap: true
            });
        });

        // Apply background images from data attributes
        var blurContainers = document.querySelectorAll('.blur-bg-container');
        blurContainers.forEach(function (container) {
            var bgUrl = container.getAttribute('data-bg');
            var bgDiv = container.querySelector('.blur-bg');
            if (bgUrl && bgDiv) {
                bgDiv.style.backgroundImage = 'url("' + bgUrl + '")';
            }
        });
    });
</script>
{% endblock %}